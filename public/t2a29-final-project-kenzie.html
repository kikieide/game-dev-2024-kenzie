<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    height: 100%;
    font-family: Arial, sans-serif;
}
    #myBody {
    background-image: url('https://github.com/kikieide/game-dev-2024-kenzie/blob/main/public/Screenshot%202025-01-02%201937355.png?raw=true');
    background-repeat: repeat;
    background-size: 80%;
}
.myUi {
    position: fixed;
    top: 0; 
    left: 50%; 
    display: inline-table;
    text-align: right;
    border: 5px solid #9494b8;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    padding: 20px;
    width: fit-content;
    z-index: 999;
}
   </style>

<body id="myBody" onkeydown="{
  event.preventDefault();  

    let myImg01 = document.getElementById('myImg01');
  let currentLeft = parseInt(myImg01.style.left || 0); 
  let currentTop = parseInt(myImg01.style.top || 0);  

 
  if (event.key === 'd') myImg01.style.left = (currentLeft + 10) + 'px';  
  if (event.key === 's') myImg01.style.top = (currentTop + 10) + 'px';   
  if (event.key === 'a') myImg01.style.left = (currentLeft - 10) + 'px';  
  if (event.key === 'w') myImg01.style.top = (currentTop - 10) + 'px';    
  
  myCheckHit();
}">
    

   
        
<div id="myUi" class="myUi">
    <img id="myBag01" src="https://piskel-imgstore-b.appspot.com/img/de13a7ab-ccba-11ef-92a1-b904fd9b30f0.gif" style="position:absolute; width: 120px; height:80px; top: 50px;">
    <b style= "color: white">Level 1 based on the template. Use buttons or WASD to move. Shoot 3 enemies to clear the waves.</b>
<input id="myText01" type=text style="font-atyle: bold" value="" size=50 placeholder="Feedback here"><br>  
    
    <input type=button value="Auto Background Left" onclick="{
  clearInterval(myClock)
  let myTemp = '100px 0px'
  myClock = setInterval(function(){
      myGlobalX -= 5
      myTemp =  myGlobalX + 'px 0px'
      document.getElementById('myBody').style.backgroundPosition = myTemp
  }, 100)}">
        
      <input type=button value="Right" onTouchStart="{this.click(); event.preventDefault();}" onclick="{
  document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px'
  myCheckHit()     // checks for all collisions
 let img = document.getElementById('myImg01');
       let myImg = img.src;
    img.src = 'https://piskel-imgstore-b.appspot.com/img/e802140c-c8c0-11ef-83a5-b92f8635db06.gif';
          setTimeout(function() {
            img.src = myImg; 
          }, 100);
    }">
                
<input type=button value="Down" onTouchStart="{this.click(); event.preventDefault();}" onclick="{
  document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 10 + 'px'
  myCheckHit()     // checks for all collisions
    let img1 = document.getElementById('myImg01');
        let myImg2 = img.src1;
     img.src1 = 'https://piskel-imgstore-b.appspot.com/img/e802140c-c8c0-11ef-83a5-b92f8635db06.gif';
          setTimeout(function() {
            img.src1 = myImg2;
          }, 100);
    }">

<input type=button value="shoot" onTouchStart="{this.click(); event.preventDefault();}" onclick="{

if (myShooting > 2 ){myShooting = 1}




  // Bullet Number 2
if (myShooting == 2){
  myShooting += 1
  document.getElementById('myBullet02').style.left = document.getElementById('myImg01').style.left
  document.getElementById('myBullet02').style.top  = document.getElementById('myImg01').style.top
  clearInterval(myGun02)
  myGun02 = setInterval(function(){
     document.getElementById('myBullet02').style.left = parseInt(document.getElementById('myBullet02').style.left) + 10 + 'px'
     myCheckHit() 
  }, 20)   // speed of bullet faster lower number
}




  // Bullet Number 1
if (myShooting == 1){
  myShooting += 1
  document.getElementById('myBullet01').style.left = document.getElementById('myImg01').style.left
  document.getElementById('myBullet01').style.top  = document.getElementById('myImg01').style.top
  clearInterval(myGun01)
  myGun01 = setInterval(function(){
     document.getElementById('myBullet01').style.left = parseInt(document.getElementById('myBullet01').style.left) + 10 + 'px'
     myCheckHit() 
  }, 20)   // speed of bullet faster lower number
}


}"><br><br>
</div>


<img id="myImg01" src="https://piskel-imgstore-b.appspot.com/img/02210e61-c8be-11ef-a8ff-b92f8635db06.gif" style="position:absolute; width:100px; height:80px; left: 130px; top:190px;">
<img id="myImg02" src="https://piskel-imgstore-b.appspot.com/img/0310e9a8-c8c3-11ef-8588-b92f8635db06.gif" style="display: none;">
<img id="myImg03" src="https://piskel-imgstore-b.appspot.com/img/0310e9a8-c8c3-11ef-8588-b92f8635db06.gif"  style="display: none;">
<img id="myImg04" src="https://piskel-imgstore-b.appspot.com/img/e8a98414-c8c3-11ef-8f6f-b92f8635db06.gif"  style="display: none;">
    <img id="myWall01" src="https://github.com/kikieide/game-dev-2024-kenzie/blob/main/public/download%20(2).png?raw=true" style="position:absolute; width: 400px; height: 250px; left: 230px; top: 200px;">
        <img id="myWall02" src="https://github.com/kikieide/game-dev-2024-kenzie/blob/main/public/download%20(2).png?raw=true" style="position:absolute; width: 600px; height: 450px; left: 1000px; top: 400px;">

<img id="myBullet01" src="https://piskel-imgstore-b.appspot.com/img/7abcb900-cbcf-11ef-ae87-250a234cd9b6.gif"  style="position:absolute; width:100px; height:80px; left: 130px; top:190px;">
<img id="myBullet02" src="https://piskel-imgstore-b.appspot.com/img/7abcb900-cbcf-11ef-ae87-250a234cd9b6.gif"  style="position:absolute; width:100px; height:80px; left: 150px; top:190px;">
    
    <script>
    window.onload = function() {
        myWaveStart();
    }

    // Global variables
    let randomIndex = Math.floor(Math.random() * 10);
    let myGlobalX = 0;
    let myClock;
    let myScore = 10;
    let myGun01;
    let myGun02;
    let myShooting = 1;
    let myEnemies = [];
    let myWave = 0;
    let myHits = 0;
    let enemyElements = [];
    let enemyImages = [
        document.getElementById('myImg02'),
        document.getElementById('myImg03'),
        document.getElementById('myImg04')
    ];

    // Collision Detection Function
    function myHitOther(obj1, obj2) {
        let left1 = parseInt(obj1.style.left);
        let right1 = left1 + parseInt(obj1.style.width);
        let top1 = parseInt(obj1.style.top);
        let bottom1 = top1 + parseInt(obj1.style.height);

        let left2 = parseInt(obj2.style.left);
        let right2 = left2 + parseInt(obj2.style.width);
        let top2 = parseInt(obj2.style.top);
        let bottom2 = top2 + parseInt(obj2.style.height);

        return (right1 >= left2) && (bottom1 >= top2) && (left1 <= right2) && (top1 <= bottom2);
    }

   
    function myCheckHit() {
        document.all.myText01.value = myScore;

        
        if (myHitOther(document.getElementById('myImg01'), document.getElementById('myWall01'))) {
            document.getElementById('myImg01').style.left = '20px';
            document.all.myText01.value = 'You hit wall1';
            myScore -= 1;
            myHits += 1;
        }

        if (myHitOther(document.getElementById('myImg01'), document.getElementById('myWall02'))) {
            document.getElementById('myImg01').style.left = '20px';
            document.all.myText01.value = 'You hit wall2';
            myScore -= 1;
            myHits += 1;
        }

        
        let bullet1 = document.getElementById('myBullet01');
        let bullet2 = document.getElementById('myBullet02');

        for (let i = 0; i < myEnemies.length; i++) {
            let enemy = myEnemies[i];
            if (myHitOther(bullet1, enemy)) {
                clearInterval(myGun01);
                bullet1.style.left = '-200px'; 
                myScore += 1;
                myHits += 1;
                checkWaveProgression();  
                break;
            }
            if (myHitOther(bullet2, enemy)) {
                clearInterval(myGun02);
                bullet2.style.left = '-200px'; 
                myScore += 1;
                myHits += 1;
                checkWaveProgression(); 
                break;
            }
        }

        if (myScore <= 0) {
            document.all.myText01.value = 'You Lose, score at zero!';
            alert('Sorry, you lose');
            location.reload();
        }
    }

    
    function checkWaveProgression() {
        if (myHits >= myWave * 3) {
          myNewWave01(); 
        }
    }

    
    function myNewWave01() {
        myHits = 0;
        myWaveStart(); 
    }

 
    function myEnemySpawn(enemyImage) {
        const enemy = enemyImage.cloneNode(true);  
        const randomTop = Math.random() * 100;  
        const randomLeft = Math.random() * 100;
        enemy.style.display = 'block';
        enemy.style.position = 'absolute';
        enemy.style.top = ${randomTop}%;
        enemy.style.left = ${randomLeft}%;
        enemy.style.width = '150px';  
        enemy.style.height = '150px';
         const randomEnemyID = myImg0${Math.floor(Math.random() * 3) + 2}; 
         enemy.id = randomEnemyID;

        document.body.appendChild(enemy);
        myEnemies.push(enemy);  
    }

   
    function myWaveStart() {
        myWave++;
        document.all.myText01.value = Wave ${myWave} starting!;
        const numEnemies = Math.floor(Math.random() * 4) + 1;

    
        myEnemies.forEach(enemy => {
            enemy.style.display = 'none';
        });
        myEnemies.length = 0;  

      
        for (let i = 0; i < numEnemies; i++) {
            const randomEnemy = enemyImages[Math.floor(Math.random() * enemyImages.length)];
            myEnemySpawn(randomEnemy);
        }
    }
</script>


</body>
